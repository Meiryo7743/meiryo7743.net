<!doctype html><html lang=ja><head prefix="https://ogp.me/ns/website#"><title>Blog > 対面イベントで便利！　押しボタン式の来場者カウンターを作る - Meiryo7743</title><meta charset=UTF-8><link rel=canonical href=https://meiryo7743.net/ja/blog/01JE7FEV00Z9QNSC7W166WWDTA/><meta name=description content="2024 年の芝浦祭 3 日目に稼働させた来場者カウンターを作ったときの振り返りです。"><meta name=robots content="index, follow"><meta property="og:title" content="Blog > 対面イベントで便利！　押しボタン式の来場者カウンターを作る"><meta property="og:type" content="website"><meta property="og:image" content="https://meiryo7743.net/assets/img/ogp.png"><meta property="og:url" content="https://meiryo7743.net/ja/blog/01JE7FEV00Z9QNSC7W166WWDTA/"><meta property="og:description" content="2024 年の芝浦祭 3 日目に稼働させた来場者カウンターを作ったときの振り返りです。"><meta property="og:locale" content="ja"><meta property="og:locale:alternate" content="en"><link href=/assets/img/favicon.ico rel=icon sizes=32x32><link href=/assets/img/favicon.svg rel=icon type=image/svg+xml><link href=/assets/img/apple-touch-icon.png rel=apple-touch-icon><link href=/sitemap-index.xml rel=sitemap><meta name=author content="Meiryo7743"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=format-detection content="telephone=no,email=no,address=no"><meta name=Hatena::Bookmark content="nocomment"><link rel=alternate hreflang=ja href=https://meiryo7743.net/ja/blog/01JE7FEV00Z9QNSC7W166WWDTA/><link rel=alternate hreflang=en href=https://meiryo7743.net/en/blog/01JE7FEV00Z9QNSC7W166WWDTA/><link rel=alternate hreflang=x-default href=https://meiryo7743.net/ja/blog/01JE7FEV00Z9QNSC7W166WWDTA/><link rel=stylesheet href=/assets/_slug_.E_6yiAaG.css><style>[data-astro-image]{width:100%;height:auto;object-fit:var(--fit);object-position:var(--pos);aspect-ratio:var(--w)/var(--h)}[data-astro-image=responsive]{max-width:calc(var(--w) * 1px);max-height:calc(var(--h) * 1px)}[data-astro-image=fixed]{width:calc(var(--w) * 1px);height:calc(var(--h) * 1px)}</style><header class=fVQGRp><noscript><div class="btcLjD dCkYtO"><p class="coifUy dnRybM jnhRIx hMnPVI ioQmXa dGyMyr fyfnQk fPSBzf"><svg width="1em" height="1em" class="jmzEDN ghouwM ghopuk" data-icon="fluent:warning-16-filled"><symbol id="ai:fluent:warning-16-filled" viewBox="0 0 16 16"><path fill="currentcolor" d="M9.092 2.638a1.25 1.25.0 00-2.182.0L2.157 11.14A1.25 1.25.0 003.247 13h9.504a1.25 1.25.0 001.091-1.86zM8.75 10.25a.75.75.0 11-1.5.0.75.75.0 011.5.0M7.5 8V5.5a.5.5.0 011 0V8a.5.5.0 01-1 0"/></symbol><use href="#ai:fluent:warning-16-filled"/></svg> <span class=hlUslA>ブラウザーの設定で JavaScript が無効になっています。ページが正しく表示されない場合があります。</span></div></noscript><nav class=bqBPNl><ul class="coifUy dnRybM jnhRIx hMnPVI ioQmXa dGyMyr BEBLL cbkwRf dnRyjI fPSBzf"><li><a href=/ja/ class="bYPztT bDveUq jxUvCM jlowLP bDIyLE fPtRO jrHZPA hDGJaH dNTNvO fyfnQk fPSBzf gVSYHD diIxfU bLxLlJ fyfohc"><svg width="1em" height="1em" class="jmzEDN ghouwM ghopuk" data-icon="meiryo7743"><symbol id="ai:local:meiryo7743" viewBox="0 0 16 16"><circle cx="8" cy="8" r="8" fill="#222"/><path fill="#ddd" d="M4 4v2l2.5 2.5L4 11l1 1h5l-1-1H6l2.5-2.5L12 12v-2L9.5 7.5 12 5l-1-1H6l1 1h3L7.5 7.5z"/></symbol><use href="#ai:local:meiryo7743"/></svg> <span translate=no class=jRXsVq>Meiryo7743</span></a><li><a href=/ja/blog/ class="bYPztT bDveUq jxUvCM jlowLP bDIyLE fPtRO jrHZPA hDGJaH dNTNvO fyfnQk fPSBzf gVSYHD diIxfU bLxLlJ fyfohc"><svg width="1em" height="1em" class="jmzEDN ghouwM ghopuk" data-icon="fluent:document-text-16-filled"><symbol id="ai:fluent:document-text-16-filled" viewBox="0 0 16 16"><path fill="currentcolor" d="M8 4.5V1H4.5A1.5 1.5.0 003 2.5v11A1.5 1.5.0 004.5 15h7a1.5 1.5.0 001.5-1.5V6H9.5A1.5 1.5.0 018 4.5m1 0V1.25L12.75 5H9.5A.5.5.0 019 4.5M5.5 8h5a.5.5.0 010 1h-5a.5.5.0 010-1M5 10.5a.5.5.0 01.5-.5h5a.5.5.0 010 1h-5a.5.5.0 01-.5-.5m.5 1.5h5a.5.5.0 010 1h-5a.5.5.0 010-1"/></symbol><use href="#ai:fluent:document-text-16-filled"/></svg> <span translate=no>Blog</span></a><li><a href=/ja/blog/tags/ class="bYPztT bDveUq jxUvCM jlowLP bDIyLE fPtRO jrHZPA hDGJaH dNTNvO fyfnQk fPSBzf gVSYHD diIxfU bLxLlJ fyfohc"><svg width="1em" height="1em" class="jmzEDN ghouwM ghopuk" data-icon="fluent:tag-16-filled"><symbol id="ai:fluent:tag-16-filled" viewBox="0 0 16 16"><path fill="currentcolor" d="M2.587 7.314a1.99 1.99.0 000 2.822l3.296 3.28a2.013 2.013.0 002.836.0l4.67-4.647a2 2 0 00.587-1.397L14 4.01A2 2 0 0011.987 2l-3.25.014a2 2 0 00-1.41.584zM11 6a1 1 0 110-2 1 1 0 010 2"/></symbol><use href="#ai:fluent:tag-16-filled"/></svg> <span translate=no>Tags</span></a><li><a href=https://forms.gle/MBh57otLQ7wLQrt8A target=_blank rel=nofollow class="bYPztT bDveUq jxUvCM jlowLP bDIyLE fPtRO jrHZPA hDGJaH dNTNvO fyfnQk fPSBzf gVSYHD diIxfU bLxLlJ fyfohc"><svg width="1em" height="1em" class="jmzEDN ghouwM ghopuk" data-icon="fluent:mail-16-filled"><symbol id="ai:fluent:mail-16-filled" viewBox="0 0 16 16"><path fill="currentcolor" d="M4 3A2 2 0 002 5v.201l6 3.231 6-3.23V5a2 2 0 00-2-2zm10 3.337L8.237 9.44a.5.5.0 01-.474.0L2 6.337V11a2 2 0 002 2h8a2 2 0 002-2z"/></symbol><use href="#ai:fluent:mail-16-filled"/></svg> <span class="bYPztT fPSBzf"><span translate=no>Contact</span> <svg width="1em" height="1em" class="jmzEDN jNnFZz jNnJyH ifPBCK" data-icon="fluent:open-16-filled"><symbol id="ai:fluent:open-16-filled" viewBox="0 0 16 16"><path fill="currentcolor" d="M4.75 3.5c-.69.0-1.25.56-1.25 1.25v6.5c0 .69.56 1.25 1.25 1.25h6.5c.69.0 1.25-.56 1.25-1.25v-1.5a.75.75.0 011.5.0v1.5A2.75 2.75.0 0111.25 14h-6.5A2.75 2.75.0 012 11.25v-6.5A2.75 2.75.0 014.75 2h1.5a.75.75.0 010 1.5zM8 2.75A.75.75.0 018.75 2h4.5a.75.75.0 01.75.75v4.5a.75.75.0 01-1.5.0V4.561l-3.22 3.22A.75.75.0 118.22 6.72l3.22-3.22H8.75A.75.75.0 018 2.75"/></symbol><use href="#ai:fluent:open-16-filled"/></svg></span></a><li><a href=/ja/ lang=ja class="bYPztT bDveUq jxUvCM jlowLP bDIyLE fPtRO jrHZPA hDGJaH dNTNvO fyfnQk fPSBzf gVSYHD diIxfU bLxLlJ fyfohc"><svg width="1em" height="1em" class="jmzEDN ghouwM ghopuk" data-icon="fluent:local-language-16-filled"><symbol id="ai:fluent:local-language-16-filled" viewBox="0 0 16 16"><path fill="currentcolor" d="M7.75 2a.75.75.0 000 1.5H9.5v.751c0 .385-.097.679-.227.855-.111.151-.263.247-.515.247a.75.75.0 000 1.5 2.08 2.08.0 001.724-.859c.367-.5.518-1.132.518-1.743V2.75A.75.75.0 0010.25 2zM6.698 4.725a.75.75.0 00-1.396.0l-3.254 8.25a.75.75.0 101.395.55l.799-2.024h3.513l.797 2.024a.75.75.0 001.396-.55zm.466 5.276h-2.33L6 7.045zM12.75 2a.75.75.0 01.75.75v2.248h.25a.75.75.0 010 1.5h-.25v3.751a.75.75.0 01-1.5.0V2.75a.75.75.0 01.75-.75"/></symbol><use href="#ai:fluent:local-language-16-filled"/></svg> <span translate=no>日本語</span></a><li><a href=/en/ lang=en class="bYPztT bDveUq jxUvCM jlowLP bDIyLE fPtRO jrHZPA hDGJaH dNTNvO fyfnQk fPSBzf gVSYHD diIxfU bLxLlJ fyfohc"><svg width="1em" height="1em" viewBox="0 0 16 16" class="jmzEDN ghouwM ghopuk" data-icon="fluent:local-language-16-filled"><use href="#ai:fluent:local-language-16-filled"/></svg> <span translate=no>English</span></a></ul></nav></header><main><article><header class=hbhCaX><div class="coifUy dnRybM jnhRIx hMnPVI jwdzGr kXZHwL dGyMyr bYPztT fPSBzf iRgpoQ"><svg width="1em" height="1em" viewBox="0 0 16 16" class="jySYdq jySUHe" data-icon="fluent:document-text-16-filled"><use href="#ai:fluent:document-text-16-filled"/></svg><h1 class="ehtvDz dnRxXd jRXsVq fZXUkm gGRRlH">対面イベントで便利！　押しボタン式の来場者カウンターを作る</h1><ul class="coPWWb bYPznK dnRyjI VJSKb fPSBzf gasSYy"><li><time datetime=2024-12-04T09:00:00+09:00 class="bYPztT dnRKIT fPSBzf hZMpKn"><svg width="1em" height="1em" aria-label="初版公開日" class="ghouwM ghopuk" data-icon="fluent:calendar-16-filled"><symbol id="ai:fluent:calendar-16-filled" viewBox="0 0 16 16"><path fill="currentcolor" d="M14 11.5V6H2v5.5A2.5 2.5.0 004.5 14h7a2.5 2.5.0 002.5-2.5M5.997 8.248a.748.748.0 11-1.497.0.748.748.0 011.497.0m0 2.5a.748.748.0 11-1.497.0.748.748.0 011.497.0m2.752-2.5a.748.748.0 11-1.497.0.748.748.0 011.497.0m0 2.5a.748.748.0 11-1.497.0.748.748.0 011.497.0m2.748-2.5a.748.748.0 11-1.497.0.748.748.0 011.497.0M14 4.5A2.5 2.5.0 0011.5 2h-7A2.5 2.5.0 002 4.5V5h12z"/></symbol><use href="#ai:fluent:calendar-16-filled"/></svg> 2024-12-04</time><li><time datetime=2025-01-03T23:10:00+09:00 class="bYPztT dnRKIT fPSBzf hZMpKn"><svg width="1em" height="1em" aria-label="最終更新日" class="ghouwM ghopuk" data-icon="fluent:history-16-filled"><symbol id="ai:fluent:history-16-filled" viewBox="0 0 16 16"><path fill="currentcolor" d="M8 3.5A4.5 4.5.0 113.545 8.64.75.75.0 002.06 8.852 6.001 6.001.0 104 3.528V2.75a.75.75.0 00-1.5.0v3c0 .414.336.75.75.75h2.5a.75.75.0 000-1.5H4.646A4.5 4.5.0 018 3.5m.5 2.25a.75.75.0 00-1.5.0v2.5c0 .414.336.75.75.75h2a.75.75.0 000-1.5H8.5z"/></symbol><use href="#ai:fluent:history-16-filled"/></svg> 2025-01-03</time></ul><ul class="fyfnQk fPSBzf gasSYy fZXUkm bLxKQR"><li><a href=/ja/blog/tags/advent-calender/ class="bYPztT bqBPNl bDveUq jxUvCM jlowLP bDIyLE cpIoGO jrHZPA hDGJaH dNTNvO fyfnQk fPSBzf diIxfU gnlqYH bLxLlJ fyfohc"><svg width="1em" height="1em" viewBox="0 0 16 16" class="jmzEDN ghouwM ghopuk" data-icon="fluent:tag-16-filled"><use href="#ai:fluent:tag-16-filled"/></svg> <span class="ehtvDz jRXsVq">Advent Calender</span></a><li><a href=/ja/blog/tags/芝浦工業大学/ class="bYPztT bqBPNl bDveUq jxUvCM jlowLP bDIyLE cpIoGO jrHZPA hDGJaH dNTNvO fyfnQk fPSBzf diIxfU gnlqYH bLxLlJ fyfohc"><svg width="1em" height="1em" viewBox="0 0 16 16" class="jmzEDN ghouwM ghopuk" data-icon="fluent:tag-16-filled"><use href="#ai:fluent:tag-16-filled"/></svg> <span class="ehtvDz jRXsVq">芝浦工業大学</span></a><li><a href=/ja/blog/tags/デジクリ/ class="bYPztT bqBPNl bDveUq jxUvCM jlowLP bDIyLE cpIoGO jrHZPA hDGJaH dNTNvO fyfnQk fPSBzf diIxfU gnlqYH bLxLlJ fyfohc"><svg width="1em" height="1em" viewBox="0 0 16 16" class="jmzEDN ghouwM ghopuk" data-icon="fluent:tag-16-filled"><use href="#ai:fluent:tag-16-filled"/></svg> <span class="ehtvDz jRXsVq">デジクリ</span></a></ul></div></header><section class=bqBPNl><div class="coifUy dnRybM jnhRIx hMnPVI jwdzGr kXZHwL jiLEiz jsffLY cJmOgC fPSBzf iRgpoQ ioQnmO dMVrwM"><div id=content><div class="markdown-alert markdown-alert-note"><p class=markdown-alert-title><svg width="24" height="24" viewBox="0 0 16 16"><path fill="currentcolor" d="M8 1a7 7 0 110 14A7 7 0 018 1m0 5.25a.749.749.0 100-1.5.749.749.0 000 1.498m.5 1.25a.5.5.0 00-1 0v3a.5.5.0 001 0z"/></svg>Note<p>この記事はデジクリ Advent Calendar 2024 4 日目の記事です。<p>デジクリは芝浦工業大学の創作サークルです。<p><a href=https://digicre.net/ rel=nofollow target=_blank>デジクリについて，詳しくはこちらのサイトをご覧ください。<span><svg viewBox="0 0 16 16" width="16" height="16"><path fill="currentcolor" d="M4.75 3.5c-.69.0-1.25.56-1.25 1.25v6.5c0 .69.56 1.25 1.25 1.25h6.5c.69.0 1.25-.56 1.25-1.25v-1.5a.75.75.0 011.5.0v1.5A2.75 2.75.0 0111.25 14h-6.5A2.75 2.75.0 012 11.25v-6.5A2.75 2.75.0 014.75 2h1.5a.75.75.0 010 1.5zM8 2.75A.75.75.0 018.75 2h4.5a.75.75.0 01.75.75v4.5a.75.75.0 01-1.5.0V4.561l-3.22 3.22A.75.75.0 118.22 6.72l3.22-3.22H8.75A.75.75.0 018 2.75"/></svg></span></a><p>3 日目の記事は 18th 小どばとさんの「<a href=https://peristeronica.hatenablog.com/entry/2024/12/03/000000 rel=nofollow target=_blank>にゃーんの絵かきうた 純正品納品編<span><svg viewBox="0 0 16 16" width="16" height="16"><path fill="currentcolor" d="M4.75 3.5c-.69.0-1.25.56-1.25 1.25v6.5c0 .69.56 1.25 1.25 1.25h6.5c.69.0 1.25-.56 1.25-1.25v-1.5a.75.75.0 011.5.0v1.5A2.75 2.75.0 0111.25 14h-6.5A2.75 2.75.0 012 11.25v-6.5A2.75 2.75.0 014.75 2h1.5a.75.75.0 010 1.5zM8 2.75A.75.75.0 018.75 2h4.5a.75.75.0 01.75.75v4.5a.75.75.0 01-1.5.0V4.561l-3.22 3.22A.75.75.0 118.22 6.72l3.22-3.22H8.75A.75.75.0 018 2.75"/></svg></span></a>」です。</div><h2 id=はじめに来場者カウンターを改良したい>はじめに――来場者カウンターを改良したい！</h2><p>11 月 2 日（土）から 4 日（月）の 3 日間，芝浦工業大学では豊洲キャンパスにおいて芝浦祭（文化祭）が開催されました。デジクリも芝浦祭に出展し，3 日間の累計で 1921 人もの来場と大いに賑わいました。<p>来場者数をカウントするにあたって，<strong>図 1</strong> に示すように会場の入口にボタンと来場者数を表示するモニターを設置しました。入口で 1 人ごとに 1 回だけボタンを押してもらうことで，来場者数を記録していく方式です。以降，これらを総称して「<strong>来場者カウンター</strong>」と呼ぶことにします。この来場者カウンターは自分が制作し，3 日目（最終日）に稼働させたものです。<p><img alt=今回製作した来場者カウンター width=2048 height=1645 loading=lazy decoding=async src=/assets/figure_0001.CWGd6u8c_ZcYnyU.webp><p><strong>図 1</strong>：今回製作した来場者カウンター（引用元<sup><a href=#user-content-fn-%E7%B4%AF%E8%A8%88%E6%9D%A5%E5%A0%B4%E8%80%85%E6%95%B0 id=user-content-fnref-%E7%B4%AF%E8%A8%88%E6%9D%A5%E5%A0%B4%E8%80%85%E6%95%B0 data-footnote-ref aria-describedby=footnote-label>1</a></sup>）。芝浦工業大学の公式マスコットキャラクターである<a href=https://www.shibaura-it.ac.jp/about/pr/Techshiba.html rel=nofollow target=_blank>テクしばくん<span><svg viewBox="0 0 16 16" width="16" height="16"><path fill="currentcolor" d="M4.75 3.5c-.69.0-1.25.56-1.25 1.25v6.5c0 .69.56 1.25 1.25 1.25h6.5c.69.0 1.25-.56 1.25-1.25v-1.5a.75.75.0 011.5.0v1.5A2.75 2.75.0 0111.25 14h-6.5A2.75 2.75.0 012 11.25v-6.5A2.75 2.75.0 014.75 2h1.5a.75.75.0 010 1.5zM8 2.75A.75.75.0 018.75 2h4.5a.75.75.0 01.75.75v4.5a.75.75.0 01-1.5.0V4.561l-3.22 3.22A.75.75.0 118.22 6.72l3.22-3.22H8.75A.75.75.0 018 2.75"/></svg></span></a>，ポケモンの<a href="https://www.pokemoncenter-online.com/?main_page=product_list&#x26;sort=p&#x26;keyword=%E3%81%BF%E3%81%8C%E3%82%8F%E3%82%8A&#x26;cat1=toy&#x26;from=search_form" rel=nofollow target=_blank>みがわり人形<span><svg viewBox="0 0 16 16" width="16" height="16"><path fill="currentcolor" d="M4.75 3.5c-.69.0-1.25.56-1.25 1.25v6.5c0 .69.56 1.25 1.25 1.25h6.5c.69.0 1.25-.56 1.25-1.25v-1.5a.75.75.0 011.5.0v1.5A2.75 2.75.0 0111.25 14h-6.5A2.75 2.75.0 012 11.25v-6.5A2.75 2.75.0 014.75 2h1.5a.75.75.0 010 1.5zM8 2.75A.75.75.0 018.75 2h4.5a.75.75.0 01.75.75v4.5a.75.75.0 01-1.5.0V4.561l-3.22 3.22A.75.75.0 118.22 6.72l3.22-3.22H8.75A.75.75.0 018 2.75"/></svg></span></a>，<a href="https://shopping.jreast.co.jp/prd/?category_id%5B%5D=02&#x26;category_detail%5B%5D=0203&#x26;category_detail%5B%5D=0204&#x26;category_detail_3%5B%5D=020402" rel=nofollow target=_blank>Suica のペンギン<span><svg viewBox="0 0 16 16" width="16" height="16"><path fill="currentcolor" d="M4.75 3.5c-.69.0-1.25.56-1.25 1.25v6.5c0 .69.56 1.25 1.25 1.25h6.5c.69.0 1.25-.56 1.25-1.25v-1.5a.75.75.0 011.5.0v1.5A2.75 2.75.0 0111.25 14h-6.5A2.75 2.75.0 012 11.25v-6.5A2.75 2.75.0 014.75 2h1.5a.75.75.0 010 1.5zM8 2.75A.75.75.0 018.75 2h4.5a.75.75.0 01.75.75v4.5a.75.75.0 01-1.5.0V4.561l-3.22 3.22A.75.75.0 118.22 6.72l3.22-3.22H8.75A.75.75.0 018 2.75"/></svg></span></a>たちが来場者を歓迎する。<p>それ以前まで動かしていた来場者カウンターは，別の方が即興で実装してくださったもので，<strong>図 2</strong> のような白い画面に巨大な文字サイズで累計来場者数を表示するだけの極めてシンプルな実装です。もちろん，来場者カウンターとして必要な機能を備えているため，実用上は問題ありません。<p><img alt=従来の来場者カウンター width=2048 height=1536 loading=lazy decoding=async src=/assets/figure_0002.CpEgsT5l_Z1Hk6Xk.webp><p><strong>図 2</strong>：従来の来場者カウンター（引用元：<sup><a href=#user-content-fn-%E5%BE%93%E6%9D%A5%E3%81%AE%E6%9D%A5%E5%A0%B4%E8%80%85%E3%82%AB%E3%82%A6%E3%83%B3%E3%82%BF%E3%83%BC id=user-content-fnref-%E5%BE%93%E6%9D%A5%E3%81%AE%E6%9D%A5%E5%A0%B4%E8%80%85%E3%82%AB%E3%82%A6%E3%83%B3%E3%82%BF%E3%83%BC data-footnote-ref aria-describedby=footnote-label>2</a></sup>）。今回の芝浦祭での使用例を捉えた写真が見つからなかったので，2024 年の大宮祭における使用例を示している。<p>ただ，せっかくなら少しブラッシュアップしたい気持ちが自分の中で高まりました。そこで，芝浦祭 2 日目が終了した後，夜中にサクッと作り上げたものが先ほどの<strong>図 1</strong> の来場者カウンターというわけです。本記事では，この来場者カウンターをどのような流れで設計・実装したのか書き記します。<h2 id=設計来場者カウンターに必要な機能とは>設計――来場者カウンターに必要な機能とは？</h2><p>先述の通り，今回製作した来場者カウンターは芝浦祭 2 日目の終了後から翌 3 日目が始めるまでの半日ほどの間にゼロから開発しました。すなわち，夜から朝にかけての時間帯です。会場の豊洲キャンパスへ往復する移動時間，食事時間，入浴時間，睡眠時間といった欠かせないものを除くと，開発に割けるのは最大で 3 時間ほどしかありません。したがって，来場者カウンターに必要な機能の検討とブラッシュアップする範囲の絞り込みが肝心です。<p>1 時間ほど思考を巡らせた結果，今回製作した来場者カウンターでは，以下の機能を持たせることにしました。<ol><li>累計来場者数（カウント）を表示する<li>カウントに合わせて絵文字を表示する<li>日本語と英語の両方でメッセージを併記する<li>最後にカウンターを操作した時刻の表示する<li>カウントの増加と減少ができる<li>カウンターの操作履歴を逐次記録し，ファイルとして出力できる</ol><p>これらは来場者数のカウントをはじめとした表示内容を改善するもの，あるいは意外と重宝するのではないかと期待される新機能の追加という 2 つに分けられます。<p>表示内容の改善策（<strong>図 3</strong>）について，絵文字の表示とは，例えば来場者数が100人に達したら「㊗ 100 人目！」という風に表示されるイメージです。ちょっとした遊び心を持たせてみても悪くはないだろうと考えました。また，英語併記に関しては，留学生がデジクリの会場を訪れるケースが少なからずあり，付け加えても良いだろうという経験則によります。なお，混雑する時間帯では一度に多くの人がボタンを押して入場するため，ミリ秒単位で最終カウント時刻を表示させることにします。これは来場者向けというよりもデジクリ部員（係員）向けのもので，来場者のカウントができていることが目視で分かり，安心感を抱かせる意図があります。<p><img alt=来場者カウンターの表示内容のイメージ width=1920 height=1080 loading=lazy decoding=async src=/assets/figure_0003.DxR7qC12_3ROKT.webp><p><strong>図 3</strong>：来場者カウンターの表示内容のイメージ。Figma で作成した。<p>対して，新機能は全面的にデジクリ部員（係員）のためのものです。従来の来場者カウンターは，実のところ誤操作でカウントしてしまった場合の操作取り消しが未実装でした。来場者カウンターの近くには常時デジクリ部員が常駐するようなシフトが組まれていたので，誤操作時には人力で対処することができる形にはなっていました。それでも，やはり係員用の操作体系を設けて来場者数の辻褄を合わせられる仕組みをシステム内に組み込んでおくべきでしょう。加えて，来場者カウンターの操作履歴を逐次記録し，ファイルとして出力する機能も設ければ，来場者数の記録をより正確なデータにできます。操作履歴としては，操作の時刻とそのときのカウントを含めれば十分なはずです。また，操作履歴を解析すれば時間帯別の来場者数が明らかになるため，今後の文化祭での会場設営に役立つことも副次的な効果として期待されます。<h2 id=実装実現が容易な方法を求めて>実装――実現が容易な方法を求めて</h2><p>作りたい来場者カウンターの詳細が決まったので，いよいよどんな手法で実現するのかの段階に入ります。設計の段階で 1 時間を費やしたことから，残り 2 時間ほどで実装できるような方法を選択しなければなりません。<p>今回，来場者カウンターに使用するボタン（<strong>図 1</strong> の緑色のボタンのこと）は，なんと OS 側でスペースキーとして認識される代物だったのです。よって，自分が得意とする Web ブラウザー上で動作するアプリとして実装する方針が妥当であろうと判断しました。そんなわけで，表示部分は HTML と CSS で実装し，カウント操作等の処理は JavaScript のコードを少々書いてすぐに完成しました。<div class="markdown-alert markdown-alert-note"><p class=markdown-alert-title><svg width="24" height="24" viewBox="0 0 16 16"><path fill="currentcolor" d="M8 1a7 7 0 110 14A7 7 0 018 1m0 5.25a.749.749.0 100-1.5.749.749.0 000 1.498m.5 1.25a.5.5.0 00-1 0v3a.5.5.0 001 0z"/></svg>Note<p>せっかくなのでソースコードを GitHub で公開したいところなのですが，記事公開時点では様々な都合により，まだ準備できていません。</div><p>ここでは，実装のポイントやこだわりをいくつか列挙してみます。<p>今回製作した来場者カウンターは，ボタンを用意した後に純粋にローカルの HTML ファイルを Web ブラウザー上で開き，全画面表示にすれば準備が完了します。誰でも簡単にセットアップできるようにしました。また，別の視点から眺めると，実行端末がオフラインでも 100 % 機能するわけで，例えばインターネット環境の安定性に困難のあるコミケ会場のようなシーンでも問題なく利用できます。<p>ボタンを押すと来場者数のカウントが増えるようにすべく，<a href=https://developer.mozilla.org/en-US/docs/Web/API/Element/keyup_event rel=nofollow target=_blank><code>keyup</code> イベント<span><svg viewBox="0 0 16 16" width="16" height="16"><path fill="currentcolor" d="M4.75 3.5c-.69.0-1.25.56-1.25 1.25v6.5c0 .69.56 1.25 1.25 1.25h6.5c.69.0 1.25-.56 1.25-1.25v-1.5a.75.75.0 011.5.0v1.5A2.75 2.75.0 0111.25 14h-6.5A2.75 2.75.0 012 11.25v-6.5A2.75 2.75.0 014.75 2h1.5a.75.75.0 010 1.5zM8 2.75A.75.75.0 018.75 2h4.5a.75.75.0 01.75.75v4.5a.75.75.0 01-1.5.0V4.561l-3.22 3.22A.75.75.0 118.22 6.72l3.22-3.22H8.75A.75.75.0 018 2.75"/></svg></span></a>を利用しています。類似する <a href=https://developer.mozilla.org/en-US/docs/Web/API/Element/keydown_event rel=nofollow target=_blank><code>keydown</code> イベント<span><svg viewBox="0 0 16 16" width="16" height="16"><path fill="currentcolor" d="M4.75 3.5c-.69.0-1.25.56-1.25 1.25v6.5c0 .69.56 1.25 1.25 1.25h6.5c.69.0 1.25-.56 1.25-1.25v-1.5a.75.75.0 011.5.0v1.5A2.75 2.75.0 0111.25 14h-6.5A2.75 2.75.0 012 11.25v-6.5A2.75 2.75.0 014.75 2h1.5a.75.75.0 010 1.5zM8 2.75A.75.75.0 018.75 2h4.5a.75.75.0 01.75.75v4.5a.75.75.0 01-1.5.0V4.561l-3.22 3.22A.75.75.0 118.22 6.72l3.22-3.22H8.75A.75.75.0 018 2.75"/></svg></span></a>でも同じことができますが，ボタンを長押しする状態では連打状態として取り扱われ，来場者カウンターとしては致命的な欠陥が生まれます。ボタンが<strong>押し戻った瞬間</strong>をトリガーとする <code>keyup</code> イベントなら，そのようなバグを回避できます。<p>操作履歴の保存ついては，<a href=https://developer.mozilla.org/en-US/docs/Web/API/Web_Storage_API rel=nofollow target=_blank>Web Storage API<span><svg viewBox="0 0 16 16" width="16" height="16"><path fill="currentcolor" d="M4.75 3.5c-.69.0-1.25.56-1.25 1.25v6.5c0 .69.56 1.25 1.25 1.25h6.5c.69.0 1.25-.56 1.25-1.25v-1.5a.75.75.0 011.5.0v1.5A2.75 2.75.0 0111.25 14h-6.5A2.75 2.75.0 012 11.25v-6.5A2.75 2.75.0 014.75 2h1.5a.75.75.0 010 1.5zM8 2.75A.75.75.0 018.75 2h4.5a.75.75.0 01.75.75v4.5a.75.75.0 01-1.5.0V4.561l-3.22 3.22A.75.75.0 118.22 6.72l3.22-3.22H8.75A.75.75.0 018 2.75"/></svg></span></a> のうち，<a href=https://developer.mozilla.org/en-US/docs/Web/API/Window/localStorage rel=nofollow target=_blank><code>localStorage</code><span><svg viewBox="0 0 16 16" width="16" height="16"><path fill="currentcolor" d="M4.75 3.5c-.69.0-1.25.56-1.25 1.25v6.5c0 .69.56 1.25 1.25 1.25h6.5c.69.0 1.25-.56 1.25-1.25v-1.5a.75.75.0 011.5.0v1.5A2.75 2.75.0 0111.25 14h-6.5A2.75 2.75.0 012 11.25v-6.5A2.75 2.75.0 014.75 2h1.5a.75.75.0 010 1.5zM8 2.75A.75.75.0 018.75 2h4.5a.75.75.0 01.75.75v4.5a.75.75.0 01-1.5.0V4.561l-3.22 3.22A.75.75.0 118.22 6.72l3.22-3.22H8.75A.75.75.0 018 2.75"/></svg></span></a> を利用しています。以下に示すような JSON 形式で操作時刻（<code>timestamp</code>）を ISO 8601 形式で，並びにそのときのカウンターの値（<code>count</code>）を整数値としてそれぞれ記録します。これに対して，<a href=https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/map rel=nofollow target=_blank><code>map()</code><span><svg viewBox="0 0 16 16" width="16" height="16"><path fill="currentcolor" d="M4.75 3.5c-.69.0-1.25.56-1.25 1.25v6.5c0 .69.56 1.25 1.25 1.25h6.5c.69.0 1.25-.56 1.25-1.25v-1.5a.75.75.0 011.5.0v1.5A2.75 2.75.0 0111.25 14h-6.5A2.75 2.75.0 012 11.25v-6.5A2.75 2.75.0 014.75 2h1.5a.75.75.0 010 1.5zM8 2.75A.75.75.0 018.75 2h4.5a.75.75.0 01.75.75v4.5a.75.75.0 01-1.5.0V4.561l-3.22 3.22A.75.75.0 118.22 6.72l3.22-3.22H8.75A.75.75.0 018 2.75"/></svg></span></a> を使い，操作履歴を CSV 形式に変換・出力できるようにしました。出力形式を JSON そのままではなく，敢えて CSV 形式にした理由は，先述した操作履歴のデータ解析を Excel 等でも行えるようにする配慮のためです。<pre class="astro-code astro-code-themes github-light github-dark" style=background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8;overflow-x:auto tabindex=0 data-language=json><code><span class=line><span style=color:#24292e;--shiki-dark:#E1E4E8>[</span></span>
<span class=line><span style=color:#24292e;--shiki-dark:#E1E4E8>  {</span></span>
<span class=line><span style=color:#005cc5;--shiki-dark:#79B8FF>    "timestamp"</span><span style=color:#24292e;--shiki-dark:#E1E4E8>: </span><span style=color:#032f62;--shiki-dark:#9ECBFF>"2024-12-04T00:00:00.000+09:00"</span><span style=color:#24292e;--shiki-dark:#E1E4E8>,</span></span>
<span class=line><span style=color:#005cc5;--shiki-dark:#79B8FF>    "count"</span><span style=color:#24292e;--shiki-dark:#E1E4E8>: </span><span style=color:#005cc5;--shiki-dark:#79B8FF>0</span></span>
<span class=line><span style=color:#24292e;--shiki-dark:#E1E4E8>  },</span></span>
<span class=line><span style=color:#24292e;--shiki-dark:#E1E4E8>  {</span></span>
<span class=line><span style=color:#005cc5;--shiki-dark:#79B8FF>    "timestamp"</span><span style=color:#24292e;--shiki-dark:#E1E4E8>: </span><span style=color:#032f62;--shiki-dark:#9ECBFF>"2024-12-04T00:00:01.000+09:00"</span><span style=color:#24292e;--shiki-dark:#E1E4E8>,</span></span>
<span class=line><span style=color:#005cc5;--shiki-dark:#79B8FF>    "count"</span><span style=color:#24292e;--shiki-dark:#E1E4E8>: </span><span style=color:#005cc5;--shiki-dark:#79B8FF>1</span></span>
<span class=line><span style=color:#24292e;--shiki-dark:#E1E4E8>  }</span></span>
<span class=line><span style=color:#24292e;--shiki-dark:#E1E4E8>]</span></span></code></pre><h2 id=おわりにこれからに向けて>おわりに――これからに向けて</h2><p>開発時間がわずかな状況ではありましたが，来場者カウンターの製作を芝浦祭 3 日目の開始前までに間に合わせることができ，しかも無事に問題なく動作しました。デジクリ部員の皆さんからも来場者カウンターの機能性が大きく向上したとの声を聞き，好評のようでした。<p>ただ，さらに改善できる点が見つかったり，開発時間の都合で泣く泣く見送った機能を充実させたりしたいモチベーションが個人的にまだあります。これからもデジクリが対外向けイベントに参加する機会は，数多くあることでしょう。そこで，さらに改良した来場者カウンターの実現に向けて構想しているところです。大まかな内容を以下のリストや<strong>図 4</strong>，<strong>図 5</strong> に示します。<ul><li>営業時間外になると自動的に来場者カウントを受け付けなくするタイマーを設定できる<li>「ボタンを押してください」と画面表示したり，音声案内したりする機能を追加する<li>PowerPoint のスライドのように，モニターの画面サイズに応じて表示内容を拡大・縮小させる</ul><p><img alt=さらに改良した来場者カウンターの表示内容のイメージ① width=1920 height=1080 loading=lazy decoding=async src=/assets/figure_0004.COrp9x8X_ZsBlpG.webp><p><strong>図 4</strong>：さらに改良した来場者カウンターの表示内容のイメージ①。Figma で作成した。<p><img alt=さらに改良した来場者カウンターの表示内容のイメージ② width=1920 height=1080 loading=lazy decoding=async src=/assets/figure_0005.fnilJjAM_Z2wGUJx.webp><p><strong>図 5</strong>：さらに改良した来場者カウンターの表示内容のイメージ②。Figma で作成した。<p>物事が順調に行けば，さらに改良した来場者カウンターは来年の大宮祭辺りに稼働できる予定です。もし，デジクリの会場へ訪れる機会があれば，来場者カウンターにも注目してみてください。<div class="markdown-alert markdown-alert-note"><p class=markdown-alert-title><svg width="24" height="24" viewBox="0 0 16 16"><path fill="currentcolor" d="M8 1a7 7 0 110 14A7 7 0 018 1m0 5.25a.749.749.0 100-1.5.749.749.0 000 1.498m.5 1.25a.5.5.0 00-1 0v3a.5.5.0 001 0z"/></svg>Note<p>次の 5 日目は 19th 蓮田さんの「<a href=https://note.com/hasuda_nelumbo/n/n804f91e998a5 rel=nofollow target=_blank>大学生協でお得に本を買おう【組合員割引】<span><svg viewBox="0 0 16 16" width="16" height="16"><path fill="currentcolor" d="M4.75 3.5c-.69.0-1.25.56-1.25 1.25v6.5c0 .69.56 1.25 1.25 1.25h6.5c.69.0 1.25-.56 1.25-1.25v-1.5a.75.75.0 011.5.0v1.5A2.75 2.75.0 0111.25 14h-6.5A2.75 2.75.0 012 11.25v-6.5A2.75 2.75.0 014.75 2h1.5a.75.75.0 010 1.5zM8 2.75A.75.75.0 018.75 2h4.5a.75.75.0 01.75.75v4.5a.75.75.0 01-1.5.0V4.561l-3.22 3.22A.75.75.0 118.22 6.72l3.22-3.22H8.75A.75.75.0 018 2.75"/></svg></span></a>」です。こちらもお楽しみに！</div><section data-footnotes class=footnotes><h2 class=sr-only id=footnote-label>Footnotes</h2><ol><li id=user-content-fn-%E7%B4%AF%E8%A8%88%E6%9D%A5%E5%A0%B4%E8%80%85%E6%95%B0><p><a href=https://x.com/sitdigicre/status/1853776301074878484/ rel=nofollow target=_blank>https://x.com/sitdigicre/status/1853776301074878484/<span><svg viewBox="0 0 16 16" width="16" height="16"><path fill="currentcolor" d="M4.75 3.5c-.69.0-1.25.56-1.25 1.25v6.5c0 .69.56 1.25 1.25 1.25h6.5c.69.0 1.25-.56 1.25-1.25v-1.5a.75.75.0 011.5.0v1.5A2.75 2.75.0 0111.25 14h-6.5A2.75 2.75.0 012 11.25v-6.5A2.75 2.75.0 014.75 2h1.5a.75.75.0 010 1.5zM8 2.75A.75.75.0 018.75 2h4.5a.75.75.0 01.75.75v4.5a.75.75.0 01-1.5.0V4.561l-3.22 3.22A.75.75.0 118.22 6.72l3.22-3.22H8.75A.75.75.0 018 2.75"/></svg></span></a> <a href=#user-content-fnref-%E7%B4%AF%E8%A8%88%E6%9D%A5%E5%A0%B4%E8%80%85%E6%95%B0 data-footnote-backref aria-label="Back to reference 1" class=data-footnote-backref>↩</a><li id=user-content-fn-%E5%BE%93%E6%9D%A5%E3%81%AE%E6%9D%A5%E5%A0%B4%E8%80%85%E3%82%AB%E3%82%A6%E3%83%B3%E3%82%BF%E3%83%BC><p><a href=https://x.com/sitdigicre/status/1792045097716179382 rel=nofollow target=_blank>https://x.com/sitdigicre/status/1792045097716179382<span><svg viewBox="0 0 16 16" width="16" height="16"><path fill="currentcolor" d="M4.75 3.5c-.69.0-1.25.56-1.25 1.25v6.5c0 .69.56 1.25 1.25 1.25h6.5c.69.0 1.25-.56 1.25-1.25v-1.5a.75.75.0 011.5.0v1.5A2.75 2.75.0 0111.25 14h-6.5A2.75 2.75.0 012 11.25v-6.5A2.75 2.75.0 014.75 2h1.5a.75.75.0 010 1.5zM8 2.75A.75.75.0 018.75 2h4.5a.75.75.0 01.75.75v4.5a.75.75.0 01-1.5.0V4.561l-3.22 3.22A.75.75.0 118.22 6.72l3.22-3.22H8.75A.75.75.0 018 2.75"/></svg></span></a> <a href=#user-content-fnref-%E5%BE%93%E6%9D%A5%E3%81%AE%E6%9D%A5%E5%A0%B4%E8%80%85%E3%82%AB%E3%82%A6%E3%83%B3%E3%82%BF%E3%83%BC data-footnote-backref aria-label="Back to reference 2" class=data-footnote-backref>↩</a></ol></section></div><nav><a href=/ja/blog/ class="bYPztT bqBPNl bDveUq jxUvCM jlowLP bDIyLE cpIoGO jrHZPA hDGJaH dNTNvO fyfnQk fPSBzf diIxfU gnlqYH bLxLlJ fyfohc"><svg width="1em" height="1em" class="jmzEDN jNnFZz jNnJyH ifPBCK" data-icon="fluent:chevron-left-16-filled"><symbol id="ai:fluent:chevron-left-16-filled" viewBox="0 0 16 16"><path fill="currentcolor" d="M10.26 3.2a.75.75.0 01.04 1.06L6.773 8l3.527 3.74a.75.75.0 11-1.1 1.02l-4-4.25a.75.75.0 010-1.02l4-4.25a.75.75.0 011.06-.04"/></symbol><use href="#ai:fluent:chevron-left-16-filled"/></svg> <span class="fPSBzf iRgpoQ hlUslA">Blog へ戻る</span></a></nav></div></section></article></main><footer class="bqBPNl fYgLLj"><p class="coifUy dnRybM jnhRIx hMnPVI ioQmXa dGyMyr bYPzoC"><small class=dnRKwm>© 2019-2025 Meiryo7743</small></footer>